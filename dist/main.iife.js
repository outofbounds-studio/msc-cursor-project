(function(g){"use strict";const{gsap:a,ScrollTrigger:p,CustomEase:q}=window,d=window.jQuery,h=window.barba,C=window.Lenis,w=window.Swiper,P=window.Vimeo.Player;function B(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",b):b()}function b(){q.create("msc-ease","0.625, 0.05, 0, 1"),a.defaults({ease:"msc-ease",duration:.8});const e=new C({lerp:.1,smooth:!0});function t(r){e.raf(r),requestAnimationFrame(t)}requestAnimationFrame(t),_(),j(),y(),S(),k(),E(),A(),z(),L(),O()}function x(){themeCheckActive||(document.addEventListener("scroll",checkThemeSection),themeCheckActive=!0,console.log("Theme check started; listeners reattached."))}function I(){document.removeEventListener("scroll",checkThemeSection),themeCheckActive=!1,console.log("Theme check stopped; listeners removed.")}function y(){let e=d(".work_item"),t=1/3*100+"%",r=2/3*100+"%";e.filter(":nth-child(odd)").each(function(s){let o=d(this),i=d(this).next(),n=d("<div class='work_row'></div>"),l=d("<div class='work_flex'></div>");n.insertBefore(o),l.appendTo(n),o.add(i).appendTo(l);let u=s%2!==0?1:0;a.matchMedia().add("(min-width: 992px)",()=>{let m={value:u},c=a.timeline({paused:!0,defaults:{ease:"none"}});c.fromTo(o,{width:r},{width:t}),c.fromTo(i,{width:t},{width:r},"<"),c.from(o.find(".work_image"),{scale:1.2},"<"),c.to(i.find(".work_image"),{scale:1.2},"<"),c.progress(u);function T(v){a.to(m,{value:v,ease:"sine.out",duration:.4,onUpdate:()=>c.progress(m.value)})}n.on("mousemove",function(v){let V=a.utils.normalize(.2,.8,v.clientX/window.innerWidth);T(V)}),n.on("mouseleave",()=>T(u))})})}function f(e){console.log("Changing theme to:",e);const t=a.timeline();return t.set("body",{attr:{"element-theme":e}}),t.to("body",{backgroundColor:"var(--color--background)",duration:.5,ease:"power2.out"}),t}function _(){const e=document.querySelector(".nav_bar"),t=e?e.offsetHeight/2:0;p.create({trigger:"[data-theme-section]",start:`top ${t}px`,toggleActions:"play none none reverse",onEnter:r=>{const s=r.trigger.getAttribute("data-theme-section");f(s)},onLeaveBack:r=>{const o=r.trigger.getAttribute("data-theme-section")==="dark"?"light":"dark";f(o)}})}function j(){function e(){const t=document.querySelectorAll("[data-theme-section]"),r=document.querySelector(".nav_bar"),s=r?r.offsetHeight/2:0;t.forEach(function(o){const{top:i,bottom:n}=o.getBoundingClientRect();if(i<=s&&n>=s){const l=o.getAttribute("data-theme-section");f(l)}})}e(),h.hooks.beforeLeave(()=>{I(),p.getAll().forEach(t=>t.kill())}),h.hooks.after(()=>{console.log("After transition hook triggered."),e(),x(),console.log("Theme checked and listeners started post-transition.")})}function S(){document.querySelectorAll("[data-vimeo-bg]").forEach(t=>{const r=t.getAttribute("data-vimeo-bg");if(!r)return;new P(t,{id:r,background:!0,loop:!0,muted:!0});function s(){const o=t.clientWidth/t.clientHeight,i=16/9;o>i?(t.style.width="100%",t.style.height=`${t.clientWidth/i}px`):(t.style.width=`${t.clientHeight*i}px`,t.style.height="100%")}window.addEventListener("resize",s),s()})}function k(){new w(".swiper",{slidesPerView:"auto",spaceBetween:24,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function E(){new w(".testimonial-swiper",{slidesPerView:1,spaceBetween:32,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0}})}function A(){const e=document.querySelectorAll("[data-tab-button]"),t=document.querySelectorAll("[data-tab-content]");let r;function s(i){const n=e[i].querySelector(".tab-progress");n&&(a.set(n,{width:"0%"}),a.to(n,{width:"100%",duration:5,ease:"none",onComplete:()=>o((i+1)%e.length)}))}function o(i){clearInterval(r),e.forEach(n=>n.classList.remove("active")),t.forEach(n=>n.classList.remove("active")),e[i].classList.add("active"),t[i].classList.add("active"),s(i)}e.forEach((i,n)=>{i.addEventListener("click",()=>o(n))}),e.length>0&&o(0)}function z(){const e=document.querySelector(".cursor");if(!e)return;e.querySelector(".cursor-inner"),e.querySelector(".cursor-circle"),a.set(e,{xPercent:-50,yPercent:-50});let t=a.quickTo(e,"x",{duration:.6,ease:"power3"}),r=a.quickTo(e,"y",{duration:.6,ease:"power3"});window.addEventListener("mousemove",o=>{t(o.clientX),r(o.clientY)}),document.querySelectorAll("a, button, [data-cursor], .swiper-button-prev, .swiper-button-next").forEach(o=>{o.addEventListener("mouseenter",()=>{e.classList.add("hover"),o.hasAttribute("data-cursor")&&e.classList.add(o.getAttribute("data-cursor"))}),o.addEventListener("mouseleave",()=>{e.classList.remove("hover"),o.hasAttribute("data-cursor")&&e.classList.remove(o.getAttribute("data-cursor"))})})}function L(e=".thumbnail-container",t=".thumbnail",r=".hover-image"){document.querySelectorAll(e).forEach(o=>{const i=o.querySelector(t),n=o.querySelector(r);!i||!n||(o.addEventListener("mouseenter",()=>{a.to(n,{opacity:1,duration:.3,ease:"power2.out"})}),o.addEventListener("mouseleave",()=>{a.to(n,{opacity:0,duration:.3,ease:"power2.out"})}),o.addEventListener("mousemove",l=>{const u=o.getBoundingClientRect(),m=l.clientX-u.left,c=l.clientY-u.top;a.to(n,{x:m,y:c,duration:.6,ease:"power3.out"})}))})}function O(){h.init({transitions:[{name:"opacity-transition",leave(e){return a.to(e.current.container,{opacity:0,duration:.5})},enter(e){return a.from(e.next.container,{opacity:0,duration:.5})}}],views:[{namespace:"home",beforeEnter(e){y(),S()},afterLeave(e){}},{namespace:"work",beforeEnter(e){k(),L()},afterLeave(e){}},{namespace:"about",beforeEnter(e){E(),A()},afterLeave(e){}},{namespace:"contact",beforeEnter(e){},afterLeave(e){}}]})}g.init=B,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})(this.webflowCursorProject=this.webflowCursorProject||{});
