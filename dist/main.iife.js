(function(w){"use strict";const{gsap:a,ScrollTrigger:b,CustomEase:P}=window,u=window.jQuery,f=window.barba,B=window.Lenis,y=window.Swiper,x=window.Vimeo.Player;let v=!1;function m(){const e=document.querySelectorAll("[data-theme-section]"),t=document.querySelector(".nav_bar"),n=t?t.offsetHeight/2:0;e.forEach(function(s){const{top:o,bottom:i}=s.getBoundingClientRect();if(o<=n&&i>=n){const r=s.getAttribute("data-theme-section");g(r)}})}function I(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",S):S()}function S(){P.create("msc-ease","0.625, 0.05, 0, 1"),a.defaults({ease:"msc-ease",duration:.8});const e=new B({lerp:.1,smooth:!0});function t(s){e.raf(s),requestAnimationFrame(t)}requestAnimationFrame(t),z(),O(),V();const n=document.body.getAttribute("data-barba-namespace");n==="home"&&(E(),k()),n==="work"&&(L(),q()),n==="about"&&(A(),T()),H()}function _(){v||(document.addEventListener("scroll",m),v=!0,console.log("Theme check started; listeners reattached."))}function j(){document.removeEventListener("scroll",m),v=!1,console.log("Theme check stopped; listeners removed.")}function E(){let e=u(".work_item"),t=1/3*100+"%",n=2/3*100+"%";e.filter(":nth-child(odd)").each(function(s){let o=u(this),i=u(this).next(),r=u("<div class='work_row'></div>"),d=u("<div class='work_flex'></div>");r.insertBefore(o),d.appendTo(r),o.add(i).appendTo(d);let l=s%2!==0?1:0;a.matchMedia().add("(min-width: 992px)",()=>{let h={value:l},c=a.timeline({paused:!0,defaults:{ease:"none"}});c.fromTo(o,{width:n},{width:t}),c.fromTo(i,{width:t},{width:n},"<"),c.from(o.find(".work_image"),{scale:1.2},"<"),c.to(i.find(".work_image"),{scale:1.2},"<"),c.progress(l);function C(p){a.to(h,{value:p,ease:"sine.out",duration:.4,onUpdate:()=>c.progress(h.value)})}r.on("mousemove",function(p){let M=a.utils.normalize(.2,.8,p.clientX/window.innerWidth);C(M)}),r.on("mouseleave",()=>C(l))})})}function g(e){console.log("Changing theme to:",e);const t=a.timeline();return t.set("body",{attr:{"element-theme":e}}),t.to("body",{backgroundColor:"var(--color--background)",duration:.5,ease:"power2.out"}),t}function z(){const e=document.querySelector(".nav_bar"),t=e?e.offsetHeight/2:0;b.create({trigger:"[data-theme-section]",start:`top ${t}px`,toggleActions:"play none none reverse",onEnter:n=>{const s=n.trigger.getAttribute("data-theme-section");g(s)},onLeaveBack:n=>{const o=n.trigger.getAttribute("data-theme-section")==="dark"?"light":"dark";g(o)}})}function O(){m(),f.hooks.beforeLeave(()=>{j(),b.getAll().forEach(e=>e.kill())}),f.hooks.after(()=>{console.log("After transition hook triggered."),m(),_(),console.log("Theme checked and listeners started post-transition.")})}function k(){document.querySelectorAll("[data-vimeo-bg]").forEach(t=>{const n=t.getAttribute("data-vimeo-bg");if(!n)return;new x(t,{id:n,background:!0,loop:!0,muted:!0});function s(){const o=t.clientWidth/t.clientHeight,i=16/9;o>i?(t.style.width="100%",t.style.height=`${t.clientWidth/i}px`):(t.style.width=`${t.clientHeight*i}px`,t.style.height="100%")}window.addEventListener("resize",s),s()})}function L(){new y(".swiper",{slidesPerView:"auto",spaceBetween:24,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function A(){new y(".testimonial-swiper",{slidesPerView:1,spaceBetween:32,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0}})}function T(){const e=document.querySelectorAll("[data-tab-button]"),t=document.querySelectorAll("[data-tab-content]");let n;function s(i){const r=e[i].querySelector(".tab-progress");r&&(a.set(r,{width:"0%"}),a.to(r,{width:"100%",duration:5,ease:"none",onComplete:()=>o((i+1)%e.length)}))}function o(i){clearInterval(n),e.forEach(r=>r.classList.remove("active")),t.forEach(r=>r.classList.remove("active")),e[i].classList.add("active"),t[i].classList.add("active"),s(i)}e.forEach((i,r)=>{i.addEventListener("click",()=>o(r))}),e.length>0&&o(0)}function V(){const e=document.querySelector(".cursor");if(!e)return;e.querySelector(".cursor-inner"),e.querySelector(".cursor-circle"),a.set(e,{xPercent:-50,yPercent:-50});let t=a.quickTo(e,"x",{duration:.6,ease:"power3"}),n=a.quickTo(e,"y",{duration:.6,ease:"power3"});window.addEventListener("mousemove",o=>{t(o.clientX),n(o.clientY)}),document.querySelectorAll("a, button, [data-cursor], .swiper-button-prev, .swiper-button-next").forEach(o=>{o.addEventListener("mouseenter",()=>{e.classList.add("hover"),o.hasAttribute("data-cursor")&&e.classList.add(o.getAttribute("data-cursor"))}),o.addEventListener("mouseleave",()=>{e.classList.remove("hover"),o.hasAttribute("data-cursor")&&e.classList.remove(o.getAttribute("data-cursor"))})})}function q(e=".thumbnail-container",t=".thumbnail",n=".hover-image"){document.querySelectorAll(e).forEach(o=>{const i=o.querySelector(t),r=o.querySelector(n);!i||!r||(o.addEventListener("mouseenter",()=>{a.to(r,{opacity:1,duration:.3,ease:"power2.out"})}),o.addEventListener("mouseleave",()=>{a.to(r,{opacity:0,duration:.3,ease:"power2.out"})}),o.addEventListener("mousemove",d=>{const l=o.getBoundingClientRect(),h=d.clientX-l.left,c=d.clientY-l.top;a.to(r,{x:h,y:c,duration:.6,ease:"power3.out"})}))})}function H(){f.init({transitions:[{name:"opacity-transition",leave(e){return a.to(e.current.container,{opacity:0,duration:.5})},enter(e){return a.from(e.next.container,{opacity:0,duration:.5})}}],views:[{namespace:"home",beforeEnter(e){E(),k()},afterLeave(e){}},{namespace:"work",beforeEnter(e){L(),q()},afterLeave(e){}},{namespace:"about",beforeEnter(e){A(),T()},afterLeave(e){}},{namespace:"contact",beforeEnter(e){},afterLeave(e){}}]})}w.init=I,Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})(this.webflowCursorProject=this.webflowCursorProject||{});
