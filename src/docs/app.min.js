!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){gsap.registerPlugin(ScrollTrigger,CustomEase),CustomEase.create("msc-ease","0.625, 0.05, 0, 1");let e=!1;gsap.defaults({ease:"msc-ease",duration:.8});let t=new Lenis({lerp:.1,smooth:!0});function i(e){console.log("Changing theme to:",e);const t=gsap.timeline();return t.set("body",{attr:{"element-theme":e}}),t.to("body",{backgroundColor:"var(--color--background)",duration:.5,ease:"power2.out"}),t}function o(){let e=$(".work_item"),t=1/3*100+"%",i=2/3*100+"%";e.filter(":nth-child(odd)").each((function(e){let o=$(this),r=$(this).next(),a=$("<div class='work_row'></div>"),s=$("<div class='work_flex'></div>");a.insertBefore(o),s.appendTo(a),o.add(r).appendTo(s);let n=e%2!=0?1:0;gsap.matchMedia().add("(min-width: 992px)",(()=>{let e={value:n},s=gsap.timeline({paused:!0,defaults:{ease:"none"}});function l(t){gsap.to(e,{value:t,ease:"sine.out",duration:.4,onUpdate:()=>s.progress(e.value)})}s.fromTo(o,{width:i},{width:t}),s.fromTo(r,{width:t},{width:i},"<"),s.from(o.find(".work_image"),{scale:1.2},"<"),s.to(r.find(".work_image"),{scale:1.2},"<"),s.progress(n),a.on("mousemove",(function(e){let t=e.clientX/window.innerWidth;t=gsap.utils.normalize(.2,.8,t),l(t)})),a.on("mouseleave",(function(e){l(n)}))}))}))}function r(){const e=document.querySelector(".nav_bar"),t=e?e.offsetHeight/2:0;ScrollTrigger.create({trigger:"[data-theme-section]",start:`top ${t}px`,toggleActions:"play none none reverse",onEnter:e=>{i(e.trigger.getAttribute("data-theme-section"))},onLeaveBack:e=>{i("dark"===e.trigger.getAttribute("data-theme-section")?"light":"dark")}})}function a(){function t(){var e=document.querySelectorAll("[data-theme-section]"),t=document.querySelector(".nav_bar"),o=t?t.offsetHeight/2:0;e.forEach((function(e){var t=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom;t<=o&&r>=o&&i($(e).attr("data-theme-section"))}))}t(),barba.hooks.beforeLeave((()=>{document.removeEventListener("scroll",checkThemeSection),e=!1,console.log("Theme check stopped; listeners removed."),ScrollTrigger.getAll().forEach((e=>e.kill()))})),barba.hooks.after((()=>{console.log("After transition hook triggered."),t(),e||(document.addEventListener("scroll",checkThemeSection),e=!0,console.log("Theme check started; listeners reattached.")),console.log("Theme checked and listeners started post-transition.")}))}function s(){document.querySelectorAll("[data-vimeo-bg-init]").forEach((function(e,t){const i=e.getAttribute("data-vimeo-video-id");if(!i)return;const o=`https://player.vimeo.com/video/${i}?api=1&background=1&autoplay=1&loop=1&muted=1`;e.querySelector("iframe").setAttribute("src",o);const r="vimeo-player-index-"+t;e.setAttribute("id",r);const a=new Vimeo.Player(r);let s;function n(){const t=e.offsetHeight/e.offsetWidth*100,i=e.querySelector(".vimeo-bg__iframe-wrapper");i&&s&&(i.style.width=t>100*s?t/(100*s)*100+"%":"")}a.setVolume(0),a.on("bufferend",(function(){e.setAttribute("data-vimeo-activated","true"),e.setAttribute("data-vimeo-loaded","true")})),"true"===e.getAttribute("data-vimeo-update-size")&&a.getVideoWidth().then((function(t){a.getVideoHeight().then((function(i){s=i/t;const o=e.querySelector(".vimeo-player__before");o&&(o.style.paddingTop=100*s+"%")}))})),"true"===e.getAttribute("data-vimeo-update-size")?(n(),a.getVideoWidth().then((function(){a.getVideoHeight().then((function(){n()}))}))):n(),window.addEventListener("resize",n)}))}function n(){$(".slider-main_component").each((function(e){let t="true"===$(this).attr("loop-mode"),i=void 0!==$(this).attr("slider-duration")?+$(this).attr("slider-duration"):450;new Swiper($(this).find(".swiper")[0],{speed:i,loop:t,autoHeight:!1,centeredSlides:t,followFinger:!0,freeMode:!1,slideToClickedSlide:!1,slidesPerView:1,spaceBetween:"4%",rewind:!1,mousewheel:{forceToAxis:!0},keyboard:{enabled:!0,onlyInViewport:!0},breakpoints:{480:{slidesPerView:1,spaceBetween:"4%"},768:{slidesPerView:2,spaceBetween:"4%"},992:{slidesPerView:3.5,spaceBetween:"1%"}},pagination:{el:$(this).find(".swiper-bullet-wrapper")[0],bulletActiveClass:"is-active",bulletClass:"swiper-bullet",bulletElement:"button",clickable:!0},navigation:{nextEl:$(this).find(".swiper-next")[0],prevEl:$(this).find(".swiper-prev")[0],disabledClass:"is-disabled"},scrollbar:{el:$(this).find(".swiper-drag-wrapper")[0],draggable:!0,dragClass:"swiper-drag",snapOnRelease:!0},slideActiveClass:"is-active",slideDuplicateActiveClass:"is-active"})}))}function l(){$(".slider-testimonial_component").each((function(e){let t="true"===$(this).attr("loop-mode"),i=void 0!==$(this).attr("slider-duration")?+$(this).attr("slider-duration"):450;new Swiper($(this).find(".swiper")[0],{speed:i,loop:t,autoHeight:!1,centeredSlides:t,followFinger:!0,freeMode:!1,slideToClickedSlide:!1,slidesPerView:1,spaceBetween:"4%",rewind:!1,mousewheel:{forceToAxis:!0},keyboard:{enabled:!0,onlyInViewport:!0},breakpoints:{480:{slidesPerView:1,spaceBetween:"4%"},768:{slidesPerView:2,spaceBetween:"4%"},992:{slidesPerView:4,spaceBetween:"1%"}},pagination:{el:$(this).find(".swiper-bullet-wrapper")[0],bulletActiveClass:"is-active",bulletClass:"swiper-bullet",bulletElement:"button",clickable:!0},navigation:{nextEl:$(this).find(".swiper-next")[0],prevEl:$(this).find(".swiper-prev")[0],disabledClass:"is-disabled"},scrollbar:{el:$(this).find(".swiper-drag-wrapper")[0],draggable:!0,dragClass:"swiper-drag",snapOnRelease:!0},slideActiveClass:"is-active",slideDuplicateActiveClass:"is-active",on:{slideChange:function(){this.slides.forEach((e=>{e.classList.remove("is-active")})),this.slides[this.activeIndex].classList.add("is-active")}}})}))}function c(){document.querySelectorAll('[data-tabs="wrapper"]').forEach((e=>{const t=e.querySelectorAll('[data-tabs="content-item"]'),i=e.querySelectorAll('[data-tabs="visual-item"]'),o="true"===e.dataset.tabsAutoplay,r=parseInt(e.dataset.tabsAutoplayDuration)||5e3;let a=null,s=null,n=!1,l=null;function c(e){if(n||t[e]===a)return;n=!0,l&&l.kill();const d=a,u=s,g=null==d?void 0:d.querySelector('[data-tabs="item-progress"]'),p=t[e],m=i[e],h=p.querySelector('[data-tabs="item-progress"]');null==d||d.classList.remove("active"),null==u||u.classList.remove("active"),p.classList.add("active"),m.classList.add("active");const f=gsap.timeline({defaults:{duration:.65,ease:"power3"},onComplete:()=>{a=p,s=m,n=!1,o&&function(e){l&&l.kill();const i=t[e].querySelector('[data-tabs="item-progress"]');i&&(gsap.set(i,{scaleX:0,transformOrigin:"left center"}),l=gsap.to(i,{scaleX:1,duration:r/1e3,ease:"power1.inOut",onComplete:()=>{n||c((e+1)%t.length)}}))}(e)}});d&&(d.classList.remove("active"),null==u||u.classList.remove("active"),f.set(g,{transformOrigin:"right center"}).to(g,{scaleX:0,duration:.3},0).to(u,{autoAlpha:0,xPercent:3},0).to(d.querySelector('[data-tabs="item-details"]'),{height:0},0)),p.classList.add("active"),m.classList.add("active"),f.fromTo(m,{autoAlpha:0,xPercent:3},{autoAlpha:1,xPercent:0},.3).fromTo(p.querySelector('[data-tabs="item-details"]'),{height:0},{height:"auto"},0).set(h,{scaleX:0,transformOrigin:"left center"},0)}c(0),t.forEach(((e,t)=>e.addEventListener("click",(()=>{e!==a&&c(t)}))))}))}function d(){let e=document.querySelector(".cursor"),t=e.querySelector("p"),i=document.querySelectorAll("[data-cursor]"),o=!1,r=null,a="";gsap.set(e,{xPercent:12,yPercent:75});let s=gsap.quickTo(e,"x",{ease:"power3"}),n=gsap.quickTo(e,"y",{ease:"power3"});window.addEventListener("mousemove",(i=>{let l=window.innerWidth,c=window.innerHeight,d=window.scrollY,u=i.clientX,g=i.clientY+d,p=12,m=75;if(u>.81*l?(o=!0,p=-100):o=!1,g>d+.9*c&&(m=-120),r){let e=r.getAttribute("data-cursor");r.hasAttribute("data-easteregg")&&o&&(e=r.getAttribute("data-easteregg")),e!==a&&(t.innerHTML=e,a=e)}gsap.to(e,{xPercent:p,yPercent:m,duration:.9,ease:"power3"}),s(u),n(g-d)})),i.forEach((e=>{e.addEventListener("mouseenter",(()=>{r=e;let i=e.hasAttribute("data-easteregg")?e.getAttribute("data-easteregg"):e.getAttribute("data-cursor");i!==a&&(t.innerHTML=i,a=i)}))}))}function u(){loadSplitTextPlugin("https://slater.app/13164/35586.js",(function(){gsap.registerPlugin(SplitText,ScrollTrigger);const e=document.querySelector("h2.h-display");if(!e)return void console.error("Target text elements not found. Please check the selector.");console.log("Target text elements found.");const t=new SplitText(e,{type:"chars"});gsap.timeline({scrollTrigger:{trigger:".split-text-scroll-trigger",start:"top 15%",end:"+=250%",pin:!0,scrub:1,markers:!0}}).set(t.chars,{color:"#bab9b9"}).to(t.chars,{color:"#161413",duration:1,stagger:.1})}))}requestAnimationFrame((function e(i){t.raf(i),requestAnimationFrame(e)})),barba.init({transitions:[{name:"global-transition",leave(e){const t=gsap.timeline({onComplete:()=>{e.current.container.remove()}});return t.to(e.current.container,{autoAlpha:0,duration:.5}),t},enter(e){const i=gsap.timeline({onComplete:()=>{t.start()}});return i.from(e.next.container,{autoAlpha:0,duration:.5}),i}}],views:[{namespace:"home",beforeEnter(e){console.log("Entering home page..."),console.log("Running homepage-specific scripts."),o(),a(),s(),n(),l(),c(),d(),r(),u()},afterLeave(e){console.log("Leaving home page..."),ScrollTrigger.getAll().forEach((e=>e.kill()))}},{namespace:"about",beforeEnter(e){console.log("Entering about page..."),console.log("Running about-specific scripts."),a(),d(),r()},afterLeave(e){console.log("Leaving about page..."),ScrollTrigger.getAll().forEach((e=>e.kill()))}},{namespace:"work",beforeEnter(e){console.log("Entering work page..."),console.log("Running work-specific scripts."),a(),d(),setupThumbnailHoverEffect(".work-item-wrap",".work-thumb_img",".work-hover_img"),Jetboost.ReInit(),l(),n()},afterLeave(e){console.log("Leaving work page..."),ScrollTrigger.getAll().forEach((e=>e.kill()))}},{namespace:"styles",beforeEnter(e){console.log("Entering styles page..."),console.log("Running styles-specific scripts."),o(),d(),r()},afterLeave(e){console.log("Leaving styles page..."),ScrollTrigger.getAll().forEach((e=>e.kill()))}}]}),a(),s(),n(),l(),c(),d(),r(),u()}))}();
